(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,40503,e=>{e.v(JSON.parse('[[[{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{},{},{},{"line":true},{"line":true}],[{},{},{},{},{},{},{"line":true},{},{"line":true},{},{},{},{},{}],[{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{"circuit":true},{"line":true,"ignition":false},{"circuit":true},{},{},{},{"line":true},{"line":true}],[{},{},{},{},{"line":true},{},{"line":true,"ignition":false},{},{"line":true},{},{},{},{},{}],[{"line":true},{"line":true},{"line":true},{},{"line":true},{"line":true},{"circuit":true},{"line":true},{"circuit":true},{"line":true,"ignition":false},{"line":true},{},{},{}],[{},{},{"line":true},{},{},{},{},{},{"line":true,"ignition":false},{},{"line":true},{},{},{}],[{},{},{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{"circuit":true},{"line":true},{"circuit":true},{},{},{}],[{},{},{},{},{},{},{"line":true},{},{"line":true},{},{"line":true},{},{},{}],[{},{},{},{},{},{},{"line":true},{"line":true},{"circuit":true},{"line":true,"ignition":false},{"circuit":true},{"line":true},{},{}]],[[{},{},{},{},{},{},{},{},{},{},{},{},{"line":true},{}],[{},{},{},{},{},{},{},{},{},{},{},{},{},{}],[{},{},{},{},{},{},{},{"line":true},{},{},{},{},{"line":true},{}],[{},{},{},{},{},{},{},{},{},{},{},{},{},{}],[{},{},{},{},{},{},{},{},{},{},{},{},{},{}],[{},{},{},{},{},{},{},{},{},{},{},{},{},{}],[{},{},{},{},{},{},{},{},{},{"line":true},{},{},{},{}],[{},{},{},{},{},{},{},{},{},{},{},{},{},{}],[{},{},{},{},{},{},{},{},{},{},{},{"line":true},{},{}]],[[{},{},{},{},{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{}],[{},{},{},{},{"line":true},{},{},{},{},{},{},{},{},{}],[{},{},{},{},{"line":true},{},{"line":true},{"line":true},{"line":true},{},{"line":true},{"line":true},{"line":true},{}],[{},{},{},{},{"line":true},{},{"line":true},{},{"line":true},{},{"line":true},{},{},{}],[{},{},{},{},{"line":true},{},{"line":true},{"line":true},{"circuit":true},{"line":true},{"line":true},{},{},{}],[{},{},{},{},{"line":true},{},{},{},{},{},{"line":true},{},{},{}],[{},{},{},{},{"line":true},{},{},{},{},{"line":true},{"line":true},{},{},{}],[{},{},{},{},{"line":true},{},{},{},{},{},{},{},{},{}],[{},{},{},{},{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{"line":true},{},{}]]]'))},52683,e=>{"use strict";e.s(["default",()=>I],52683);var t=e.i(43476),r=e.i(71645);let n={LINE:"line",CIRCUIT:"circuit",IGNITION:"ignition",UPLOAD_POINT:"upload-point",VACANT:"vacant"},l=[n.LINE,n.CIRCUIT,n.IGNITION,n.UPLOAD_POINT,n.VACANT],i={TILE_SIZE:20,TILE_BORDER:1,LAYER_OFFSET:3},a=e=>e.every(e=>0===Object.keys(e).length),s=e=>{let t=1/0;for(let r=0;r<e.length;r++)for(let n=e[r].length-1;n>=0;n--)a(e[r][n])||(t=Math.min(t,n));if(t===1/0)return e;let r=JSON.parse(JSON.stringify(e));for(let e=0;e<r.length;e++)r[e].splice(0,t);return r};var o=e.i(40503);let c=(0,r.createContext)(void 0),u=e=>{let{children:i}=e,a=(e=>{let{gridSize:t,gridData:i,setGridData:a,handleGridSizeChange:c}=(e=>{let[t,n]=(0,r.useState)(e),[l,i]=(0,r.useState)(()=>((e,t,r)=>{let n=JSON.parse(JSON.stringify(e)),{x:l,y:i,z:a}=r,s=n.length;if(0===s)return n;let o=n[0].length;if(0===o)return n;let c=n[0][0].length;for(let e=0;e<t.length;e++)for(let r=0;r<t[e].length;r++)for(let u=0;u<t[e][r].length;u++){let d=a+e,h=i+r,x=l+u;if(d>=s||h>=o||x>=c)continue;let m=t[e][r][u];"object"==typeof m&&null!==m&&(n[d][h][x]=m)}return n})((e=>Array.from({length:e.z},()=>Array.from({length:e.y},()=>Array.from({length:e.x},()=>({})))))(e),o.default,{x:5,y:2,z:0}));return{gridSize:t,gridData:l,setGridData:i,handleGridSizeChange:(e,r)=>{let l=Math.max(1,r),a={...t,[e]:l};i(e=>{let t=[];for(let l=0;l<a.z;l++){let i=[];for(let t=0;t<a.y;t++){let s=[];for(let i=0;i<a.x;i++){var r,n;s.push((null==(n=e[l])||null==(r=n[t])?void 0:r[i])||{})}i.push(s)}t.push(i)}return t}),n(a)}}})(e),{isRunning:u,handleStart:d,handleStep:h,handleStop:x,handleReset:m}=(e=>{let{gridData:t,gridSize:n,setGridData:l}=e,[i,a]=(0,r.useState)(!1),s=(0,r.useCallback)(()=>{l(e=>((e,t)=>{let r=((e,t)=>{let r=JSON.parse(JSON.stringify(e));for(let t=0;t<e.length;t++)for(let n=1;n<e[t].length;n++)for(let l=1;l<e[t][n].length-1;l++){if(!e[t][n][l].circuit)continue;let i=e[t][n-1][l],a=e[t][n][l-1],s=!(i.burning&&a.burning);r[t][n][l+1].line&&(r[t][n][l+1].ignition=s,r[t][n][l+1].burning=s),r[t][n+1][l].line&&(r[t][n+1][l].ignition=s,r[t][n+1][l].burning=s)}return r})(e,0);return((e,t)=>{let r=JSON.parse(JSON.stringify(e)),{z:n,y:l,x:i}=t,a=e=>{let{z:t,y:s,x:o}=e;[{z:t-1,y:s,x:o},{z:t+1,y:s,x:o},{z:t,y:s-1,x:o},{z:t,y:s+1,x:o},{z:t,y:s,x:o-1},{z:t,y:s,x:o+1}].forEach(e=>{if(e.z>=0&&e.z<n&&e.y>=0&&e.y<l&&e.x>=0&&e.x<i){let t=r[e.z][e.y][e.x];t.line&&!t.burning&&(r[e.z][e.y][e.x].burning=!0,a(e))}})},s=[];return r.forEach((e,t)=>e.forEach((e,r)=>e.forEach((e,n)=>{e.ignition&&s.push({z:t,y:r,x:n})}))),s.forEach(e=>{let{z:t,y:n,x:l}=e;r[t][n][l].burning||(r[t][n][l].burning=!0),a(e)}),r})(r=r.map(e=>e.map(e=>e.map(e=>{let t={...e};return delete t.burning,t}))),t)})(e,n))},[n,l]);return(0,r.useEffect)(()=>{if(!i)return;let e=setInterval(s,100);return()=>clearInterval(e)},[i,s]),{isRunning:i,handleStart:()=>a(!0),handleStop:()=>a(!1),handleStep:s,handleReset:()=>{l(t.map(e=>e.map(e=>e.map(e=>{let t={...e};return t.ignition&&(delete t.ignition,t.line=!0),delete t.burning,t}))))}}})({gridData:i,gridSize:t,setGridData:a}),{handleDownload:g,handleFileUpload:f}=(e=>{let{gridData:t,gridSize:r,setGridData:n}=e;return{handleDownload:()=>{(e=>{let t=new Blob([JSON.stringify((e=>{let t=e=>(e=>e.length&&e[0].length?e[0].map((t,r)=>e.map(e=>e[r])):[])(e.reverse()),r=e=>e.map(t),n=JSON.parse(JSON.stringify(e));for(let e=0;e<4;e++)n=s(n=r(n));return n})(e),null,"  ")],{type:"application/json"}),r=document.createElement("a");r.href=URL.createObjectURL(t),r.download="nand.json",r.click(),URL.revokeObjectURL(r.href)})(t)},handleFileUpload:async e=>{var l;let i=null==(l=e.target.files)?void 0:l[0];if(i)try{let e=await ((e,t,r)=>new Promise((n,l)=>{let i=new FileReader;i.onload=e=>{try{var i;let a=null==(i=e.target)?void 0:i.result;if("string"!=typeof a)return l(Error("File is not readable"));let s=JSON.parse(a);if(!Array.isArray(s))throw Error("Invalid JSON format");let o=-1,c=-1,u=-1;if(t.forEach((e,t)=>e.forEach((e,r)=>e.forEach((e,n)=>{e["upload-point"]&&(o=t,c=r,u=n)}))),-1===o)return l(Error("Upload point not found"));let d=JSON.parse(JSON.stringify(t));for(let e=0;e<s.length;e++)for(let t=0;t<s[e].length;t++)for(let n=0;n<s[e][t].length;n++){let l=o+e,i=c+t,a=u+n;if(l>=r.z||i>=r.y||a>=r.x)continue;let h=s[e][t][n];"object"==typeof h&&null!==h&&(d[l][i][a]=h)}n(d)}catch(e){l(e)}},i.onerror=()=>l(Error("File reading failed.")),i.readAsText(e)}))(i,t,r);n(e)}catch(e){console.error(e),alert(e.message)}}}})({gridData:i,gridSize:t,setGridData:a}),[p,j]=(0,r.useState)(0);return(0,r.useEffect)(()=>{p>=t.z&&j(Math.max(0,t.z-1))},[t.z,p]),{gridSize:t,gridData:i,activeZ:p,isRunning:u,handleGridSizeChange:c,handleActiveZChange:e=>{j(parseInt(e.target.value))},handleTileClick:(e,t,r,s)=>{a(((e,t,r)=>{let{z:i,y:a,x:s}=t,o=JSON.parse(JSON.stringify(e)),c=o[i][a][s]||{};if(r)return o[i][a][s]={},o;let u=l.findIndex(e=>c[e]);-1===u&&(u=l.length-1);let d=(u+1)%l.length,h=l[d],x={};return c.burning&&(x.burning=!0),h!==n.VACANT&&(x[h]=!0),o[i][a][s]=x,o})(i,{z:e,y:t,x:r},s))},handleStart:d,handleStep:h,handleStop:x,handleReset:m,handleDownload:g,handleFileUpload:f}})({x:40,y:15,z:3});return(0,t.jsx)(c.Provider,{value:a,children:i})},d=()=>{let e=(0,r.useContext)(c);if(void 0===e)throw Error("useGridSimulatorContext must be used within a GridSimulatorProvider");return e},h=r.forwardRef(function(e,t){let{title:n,titleId:l,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),n?r.createElement("title",{id:l},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"}))}),x=()=>{let{handleFileUpload:e}=d();return(0,t.jsx)("div",{className:"flex flex-col items-start space-y-2",children:(0,t.jsxs)("label",{className:"relative inline-flex items-center justify-center p-2 bg-blue-500 text-white rounded-md shadow-sm hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 cursor-pointer transition-colors duration-200",title:"ファイルをアップロード",children:[(0,t.jsx)(h,{className:"h-6 w-6"}),(0,t.jsx)("input",{type:"file",onChange:t=>{e(t),t.target.value=""},accept:".json",className:"hidden"})]})})},m=r.forwardRef(function(e,t){let{title:n,titleId:l,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),n?r.createElement("title",{id:l},n):null,r.createElement("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}),g=()=>{let{handleDownload:e}=d();return(0,t.jsx)("button",{onClick:e,className:"inline-flex items-center justify-center p-2 bg-green-500 text-white rounded-md shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 cursor-pointer transition-colors duration-200",title:"ファイルをダウンロード",children:(0,t.jsx)(m,{className:"h-6 w-6"})})},f=()=>{let{gridSize:e,activeZ:r,handleGridSizeChange:n,handleActiveZChange:l}=d(),i="w-20 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm";return(0,t.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("label",{htmlFor:"board-x",className:"font-medium text-gray-700",children:"X:"}),(0,t.jsx)("input",{id:"board-x",type:"number",value:e.x,onChange:e=>n("x",parseInt(e.target.value)||1),className:i})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("label",{htmlFor:"board-y",className:"font-medium text-gray-700",children:"Y:"}),(0,t.jsx)("input",{id:"board-y",type:"number",value:e.y,onChange:e=>n("y",parseInt(e.target.value)||1),className:i})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("label",{htmlFor:"board-z",className:"font-medium text-gray-700",children:"Z:"}),(0,t.jsx)("input",{id:"board-z",type:"number",value:e.z,onChange:e=>n("z",parseInt(e.target.value)||1),className:i})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("label",{htmlFor:"active-layer",className:"font-medium text-gray-700",children:"Layer:"}),(0,t.jsx)("select",{id:"active-layer",value:r,onChange:l,className:"rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:Array.from({length:e.z}).map((e,r)=>(0,t.jsx)("option",{value:r,children:r+1},r))})]})]})})},p=r.forwardRef(function(e,t){let{title:n,titleId:l,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),n?r.createElement("title",{id:l},n):null,r.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z",clipRule:"evenodd"}))}),j=()=>{let{handleStep:e}=d();return(0,t.jsx)("button",{onClick:e,className:"inline-flex items-center justify-center p-2 bg-gray-700 text-white rounded-md shadow-sm hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 cursor-pointer transition-colors duration-200",title:"1ステップ進める",children:(0,t.jsx)(p,{className:"h-6 w-6"})})},v=r.forwardRef(function(e,t){let{title:n,titleId:l,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),n?r.createElement("title",{id:l},n):null,r.createElement("path",{d:"M5.055 7.06C3.805 6.347 2.25 7.25 2.25 8.69v8.122c0 1.44 1.555 2.343 2.805 1.628L12 14.471v2.34c0 1.44 1.555 2.343 2.805 1.628l7.108-4.061c1.26-.72 1.26-2.536 0-3.256l-7.108-4.061C13.555 6.346 12 7.249 12 8.689v2.34L5.055 7.061Z"}))}),b=()=>{let{handleStart:e}=d();return(0,t.jsx)("button",{onClick:e,className:"inline-flex items-center justify-center p-2 bg-gray-700 text-white rounded-md shadow-sm hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 cursor-pointer transition-colors duration-200",title:"シミュレーションを開始（連続実行）",children:(0,t.jsx)(v,{className:"h-6 w-6"})})},y=r.forwardRef(function(e,t){let{title:n,titleId:l,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),n?r.createElement("title",{id:l},n):null,r.createElement("path",{fillRule:"evenodd",d:"M6.75 5.25a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H7.5a.75.75 0 0 1-.75-.75V5.25Zm7.5 0A.75.75 0 0 1 15 4.5h1.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H15a.75.75 0 0 1-.75-.75V5.25Z",clipRule:"evenodd"}))}),w=()=>{let{handleStop:e}=d();return(0,t.jsx)("button",{onClick:e,className:"inline-flex items-center justify-center p-2 bg-red-500 text-white rounded-md shadow-sm hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 cursor-pointer transition-colors duration-200",title:"シミュレーションを停止",children:(0,t.jsx)(y,{className:"h-6 w-6"})})},N=r.forwardRef(function(e,t){let{title:n,titleId:l,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),n?r.createElement("title",{id:l},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"}))}),E=r.forwardRef(function(e,t){let{title:n,titleId:l,...i}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},i),n?r.createElement("title",{id:l},n):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}),O=e=>{let{icon:r,children:n}=e;return(0,t.jsxs)("div",{className:"flex items-center space-x-4 mb-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:r}),(0,t.jsx)("p",{className:"text-gray-600",children:n})]})},C=()=>{let e=(0,r.useRef)(null),[n,l]=(0,r.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{onClick:()=>{var t;l(!1),null==(t=e.current)||t.showModal()},className:"inline-flex items-center justify-center p-2 bg-yellow-500 text-white rounded-md shadow-sm hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 cursor-pointer transition-colors duration-200",title:"操作方法を表示",children:(0,t.jsx)(N,{className:"h-6 w-6"})}),(0,t.jsxs)("dialog",{ref:e,onClose:()=>l(!1),className:"m-auto p-6 bg-white rounded-xl shadow-lg max-w-xlg backdrop:bg-black backdrop:opacity-50 ".concat(n?"dialog-fade-out":"dialog-fade-in"),children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"操作方法"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"pl-2",children:[(0,t.jsx)(O,{icon:(0,t.jsx)("strong",{children:"X:"}),children:"横幅を調整できます"}),(0,t.jsx)(O,{icon:(0,t.jsx)("strong",{children:"Y:"}),children:"縦幅を調整できます"}),(0,t.jsx)(O,{icon:(0,t.jsx)("strong",{children:"Z:"}),children:"レイヤー数を調整できます。立体的な回路を作成できます。"}),(0,t.jsx)(O,{icon:(0,t.jsx)("strong",{children:"Layer:"}),children:"アクティブなレイヤーを指定します"})]}),(0,t.jsx)("p",{className:"text-gray-700 pt-6",children:"タイルをクリックするとタイルの種類を変更できます。"}),(0,t.jsxs)("div",{className:"pl-2",children:[(0,t.jsx)(O,{icon:(0,t.jsx)("div",{className:"cell line"}),children:"導線です。信号を伝えます。"}),(0,t.jsx)(O,{icon:(0,t.jsx)("div",{className:"cell circuit"}),children:"NAND回路です。左と上が入力、右と下が出力です。"}),(0,t.jsx)(O,{icon:(0,t.jsx)("div",{className:"cell ignition"}),children:"点火です。ここから隣接する導線に信号が流れます。"}),(0,t.jsx)(O,{icon:(0,t.jsx)("div",{className:"cell upload-point"}),children:"アップロード地点です。アップロードボタンとあわせて使います。"})]}),(0,t.jsx)("p",{className:"text-gray-700 pt-6",children:"コントロール部分にはいくつかのボタンがあります。"}),(0,t.jsxs)("div",{className:"pl-2",children:[(0,t.jsx)(O,{icon:(0,t.jsx)(p,{className:"h-6 w-6 text-gray-700"}),children:"シミュレーションを１ステップ進めます。"}),(0,t.jsx)(O,{icon:(0,t.jsx)(v,{className:"h-6 w-6 text-gray-700"}),children:"シミュレーションを継続的に進めます。"}),(0,t.jsx)(O,{icon:(0,t.jsx)("strong",{children:"Reset"}),children:"シミュレーションをリセットします。すべての点火が解消されます。"}),(0,t.jsx)(O,{icon:(0,t.jsx)(E,{className:"h-6 w-6 text-green-500"}),children:"現在作成している回路情報をダウンロードできます。"}),(0,t.jsx)(O,{icon:(0,t.jsx)(h,{className:"h-6 w-6 text-blue-500"}),children:"アップロード地点に、回路をアップロードします。"})]})]}),(0,t.jsx)("div",{className:"text-right mt-6",children:(0,t.jsx)("button",{onClick:()=>{l(!0),setTimeout(()=>{var t;null==(t=e.current)||t.close()},200)},className:"px-4 py-2 bg-gray-300 text-black font-bold rounded-md hover:bg-gray-400 transition-colors duration-200",children:"閉じる"})})]})]})]})},S=()=>{let{handleReset:e,isRunning:r}=d();return(0,t.jsxs)("div",{className:"max-w-3xl mx-auto my-8 p-6 bg-white rounded-xl shadow-lg space-y-6",children:[(0,t.jsx)(f,{}),(0,t.jsx)("hr",{}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(j,{}),r?(0,t.jsx)(w,{}):(0,t.jsx)(b,{}),(0,t.jsx)("button",{onClick:e,className:"px-4 py-2 bg-gray-300 text-black font-bold rounded-md hover:bg-gray-400 transition-colors duration-200",children:"Reset"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(g,{}),(0,t.jsx)(x,{}),(0,t.jsx)(C,{})]})]})]})},R=()=>{let{gridData:e,activeZ:r,gridSize:n,handleTileClick:l}=d(),a="".concat(n.y*(i.TILE_SIZE+2*i.TILE_BORDER)+n.z*i.LAYER_OFFSET,"px"),s="".concat(n.x*(i.TILE_SIZE+2*i.TILE_BORDER)+(n.z>0?(n.z-1)*i.LAYER_OFFSET:0),"px");return(0,t.jsx)("div",{className:"w-full max-w-7xl mx-auto overflow-x-auto overflow-y-hidden p-4",children:(0,t.jsx)("div",{id:"main-table-wrapper",className:"relative mx-auto",style:{height:a,width:s},children:e.map((e,a)=>(0,t.jsx)("table",{className:"absolute border-collapse transition-opacity duration-300 ".concat(((e,t)=>{switch(Math.abs(e-t)){case 0:return"opacity-100";case 1:return"opacity-30 pointer-events-none";default:return"opacity-[.15] pointer-events-none"}})(a,r)),style:{top:"".concat(i.LAYER_OFFSET*a,"px"),left:"".concat(i.LAYER_OFFSET*a,"px"),zIndex:n.z-a},children:(0,t.jsx)("tbody",{children:e.map((e,r)=>(0,t.jsx)("tr",{children:e.map((e,n)=>(0,t.jsx)("td",{className:"cell ".concat(Object.entries(e).filter(e=>{let[t,r]=e;return r}).map(e=>{let[t]=e;return t}).join(" ")||"vacant"),onClick:e=>l(a,r,n,e.ctrlKey)},n))},r))})},a))})})},k=()=>(0,t.jsx)("header",{className:"bg-white shadow-sm sticky top-0 z-50",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900 tracking-tight",children:"NAND Simulator"})})}),I=()=>(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(k,{}),(0,t.jsx)("main",{children:(0,t.jsxs)(u,{children:[(0,t.jsx)(R,{}),(0,t.jsx)(S,{})]})})]})}]);